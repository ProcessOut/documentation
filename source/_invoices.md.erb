# Invoices

Invoices are a quick way of generating a way for your customers to checkout.

Once an invoice is created, you will receive its checkout URL `url` as well as its unique `id`. Simply redirect your customer to the `url` to perform the transaction, or create a new modal -- thanks to our javascript library -- with the `id`.

## Create a new invoice

```shell
curl --user "<project-id>:<project-secret>" \
     --request POST \
     --header "Content-Type: application/json" \
     --data-binary "{
        \"item_name\": \"Awesome item\",
        \"item_price\": 4.99,
        \"item_quantity\": 1,
        \"currency\": \"USD\",
        \"taxes\": 0.49,
        \"shipping\": 2.00,
        \"discount\": 50,
        \"enable_coupon\": 1,
        \"return_url\": \"https://company.tld/success\",
        \"cancel_url\": \"https://company.tld/cancel\",
        \"notify_url\": \"https://company.tld/ipn\",
        \"custom\": \"42\",
        \"recurring_days\": 7,
        \"sandbox\": 1
    }" \
    <%= api_link '/invoices' %>
```

```php
<?php
// Load dependencies
require 'vendor/autoload.php';

// Instanciate ProcessOut
$processout = new \ProcessOut\ProcessOut(
    '<project-id>',
    '<project-secret>');

// Create a new invoice
$invoice = new \ProcessOut\Invoice\Invoice(
    $processout,                                  // ProcessOut instance
    '1 copy of a wonderful product at $4.99 USD', // Title
    4.99,                                         // Price
    1,                                            // Quantity
    'USD');                                       // Currency
?>
```

```python
# Load dependencies
from processout.processout      import ProcessOut
from processout.invoice.invoice import Invoice

# Instanciate ProcessOut
processout = ProcessOut(
    '<project-id>',
    '<project-secret>')

# Create a new invoice
invoice = Invoice(
    processout,                                   # ProcessOut instance
    '1 copy of a wonderful product at $4.99 USD', # Title
    4.99,                                         # Price
    1,                                            # Quantity
    'USD')                                        # Currency
```

Create an invoice.

Adding the `recurring_days` field makes you able to automatically charge a user `x` days. Every payment iteration will automatically be managed by ProcessOut.

### HTTP request

`POST <%= api_link('/invoices') %>`

## Create from a tailored invoice

```shell
curl --user "<project-id>:<project-secret>" \
     --request POST \
     --header "Content-Type: application/json" \
     --data-binary "{
        \"enable_coupon\": 1,
        \"return_url\": \"https://company.tld/success\",
        \"cancel_url\": \"https://company.tld/cancel\",
        \"notify_url\": \"https://company.tld/ipn\",
        \"custom\": \"my_customer_id=1\",
        \"sandbox\": 1
    }" \
    <%= api_link '/invoices/from-tailored/<tailored-invoice-id>' %>
```

```php
<?php
// Load dependencies
require 'vendor/autoload.php';

// Instanciate ProcessOut
$processout = new \ProcessOut\ProcessOut(
    '<project-id>',
    '<project-secret>');

// Create a new invoice from a tailored invoice
$invoice = new \ProcessOut\Invoice\TailoredInvoice(
    $processout,
    '<tailored-invoice-id>');
?>
```

```python
# Load dependencies
from processout.processout              import ProcessOut
from processout.invoice.tailoredinvoice import TailoredInvoice

# Instanciate ProcessOut
processout = ProcessOut(
    '<project-id>',
    '<project-secret>')

# Create a new invoice from a tailored invoice
invoice = TailoredInvoice(
    processout,
    '<tailored-invoice-id>')
```

> Make sure to replace `<tailored-invoice-id>` with your tailored invoice id

`Tailored invoices` are invoices which can be stored in ProcessOut and used
as a template for new invoices, with some fields already set.

It is possible to create invoices from these tailored invoices using our API.

### HTTP request

`POST <%= api_link('/invoices/form-tailored/<tailored-invoice-id>') %>`

### URL Parameters

Parameter | Description
--------- | -----------
tailored-invoice-id | The ID of the tailored invoice

## Get invoice attributes

```shell
# There is no shell library
```

```php
<?php
// Let's say $invoice has previously been created

echo $invoice->getItemName();
echo $invoice->getItemPrice();
echo $invoice->getItemQuantity();
echo $invoice->getCurrency();
echo $invoice->getTaxes();
echo $invoice->getShipping();
echo $invoice->getDiscount(); # percentage
echo $invoice->getEnableCoupon();
echo $invoice->getReturnUrl();
echo $invoice->getCancelUrl();
echo $invoice->getNotifyUrl();
echo $invoice->getCustom();
echo $invoice->getSandbox();
?>
```

```python
# Let's say invoice has previously been created

print (invoice.itemName)
print (invoice.itemPrice)
print (invoice.itemQuantity)
print (invoice.currency)
print (invoice.taxes)
print (invoice.shipping)
print (invoice.discount) # percentage
print (invoice.enableCoupon)
print (invoice.returnUrl)
print (invoice.cancelUrl)
print (invoice.notifyUrl)
print (invoice.custom)
print (invoice.sandbox)
```

Once an invoice instance has been created, you might need to access its
attributes.

## Set invoice attributes

Once an invoice instance has been created, you might need to set or update its
attributes.

```shell
# There is no shell library
```

```php
<?php
// Let's say $invoice has previously been created

$invoice->setItemName('new name');
$invoice->setItemPrice(4.20);
$invoice->setItemQuantity(4);
$invoice->setCurrency('EUR');
$invoice->setTaxes(4.20);
$invoice->setShipping(4.20);
$invoice->setDiscount(42); // percentage
$invoice->setEnableCoupon(false);
$invoice->setReturnUrl('http(s)://your.site/return');
$invoice->setCancelUrl('http(s)://your.site/cancel');
$invoice->setNotifyUrl('http(s)://your.site/notify');
$invoice->setCustom('my_customer_id=1');
$invoice->setSandbox(true);
?>
```

```python
# Let's say invoice has previously been created

invoice.itemName('new name')
invoice.itemPrice(4.20)
invoice.itemQuantity(4)
invoice.currency('EUR')
invoice.taxes(4.20)
invoice.shipping(4.20)
invoice.discount(42) # percentage
invoice.enableCoupon(false)
invoice.returnUrl('http(s)://your.site/return')
invoice.cancelUrl('http(s)://your.site/cancel')
invoice.notifyUrl('http(s)://your.site/notify')
invoice.custom('my_customer_id=1')
invoice.sandbox(true)
```

## Redirect customer to checkout

```shell
# Use the url field returned in the response
```

```php
<?php
// Let's say $invoice has previously been created

echo 'Link: ' . $invoice->getLink();
?>
```

```python
# Let's say invoice has previously been created

print ('Link: ' + invoice.getLink())
```

Once an invoice is created, it is possible to redirect the customer to the
checkout page.

## Modals / Self hosted checkout


ProcessOut allows its users to directly host their checkout pages onto their
websites / applications. Most of the time, this is done using a modal.

```python
# Let's say invoice has previously been created

invoice.itemName('new name')
invoice.itemPrice(4.20)
invoice.itemQuantity(4)
invoice.currency('EUR')
invoice.taxes(4.20)
invoice.shipping(4.20)
invoice.discount(42) # percentage
invoice.enableCoupon(false)
invoice.returnUrl('http(s)://your.site/return')
invoice.cancelUrl('http(s)://your.site/cancel')
invoice.notifyUrl('http(s)://your.site/notify')
invoice.custom('my_customer_id=1')
invoice.sandbox(true)
```

## Redirect customer to checkout

```shell
# Use the url field returned in the response
```

```php
<?php
// Let's say $invoice has previously been created

echo 'Link: ' . $invoice->getLink();
?>
```

```python
# Let's say invoice has previously been created

print ('Link: ' + invoice.getLink())
```